---
layout: single
title: "SOCAR, 신규 쏘카존 제안"
categories: machine_learning
tags: [clustering, SARIMA, NDCG]
use_math: true
publish: false
author_profile: false
---

2022년 8월부터 2023년 2월까지 AIFFEL이라는 이름의 인공지능 교육과정에 참여했습니다.
이 포스트는 해당 과정의 최종 프로젝트에 대한 정리입니다.

카셰어링 업체 SOCAR로부터 45만여 건의 SOCAR 사용이력 데이터를 제공받았습니다.
그 중 다섯 건의 사용이력은 다음과 같습니다.

![]({{site.url}}\images\2023-04-14-socar_zones\original_socar_data.png){: .img-75-center}

사용이력에 포함된 feature들은 각각 `지역1`(대지역), `지역2`(소지역), `대여시작시각`, `대여종료시각`, `나이대`, `성별`, `차종`입니다.

이 데이터(이하 `수요 데이터`)를 바탕으로 하여, 자유롭게 주제를 정하고, 유의미한 결과를 내는 것이 이 최종 프로젝트(AIFFELTHON)의 목표였습니다.
저희 팀은, `수요 데이터`를 바탕으로 하여 **신규 쏘카존의 위치를 제안**해보았습니다.

---

이 프로젝트에 대한 public 깃허브는 [이곳](https://github.com/govin08/our-socar)에 있습니다.
프로젝트의 상세한 진행사항은 [이곳](https://www.notion.so/modulabs/e9651dcbc43c4d0e95954ef1963426f1)에 기록되어 있습니다.

# 발표자료

![]({{site.url}}\images\2023-04-14-socar_zones\Slide1.PNG){: .img-100-center}

![]({{site.url}}\images\2023-04-14-socar_zones\Slide2.PNG){: .img-100-center}

발표자료의 목차입니다.
01과 02에서는 프로젝트의 전반적인 사항에 대해 대략적으로 이야기하고, 03부터 06까지는 네 단계에 걸쳐서 프로젝트의 진행상황을 적었습니다.

![]({{site.url}}\images\2023-04-14-socar_zones\Slide3.PNG){: .img-100-center}

프로젝트의 배경 및 목적입니다.

저희 팀은 지역별로 쏘카의 이용 수에 차이가 있음을 먼저 관찰했습니다.
단순히 이용 수가 많고 적음을 넘어서서 이용 수가 증가세를 보이는지, 감소세를 보이는지 하는 것을 관찰할 수 있었습니다.
이러한 증감 경향을 지역별로 나누어 바라보는 것이 의미있을 것이라고 판단했습니다.

수요가 증가할 것으로 예상되는 지역과 감소할 것으로 예상되는 지역 중 저희 팀이 주목한 것은 수요가 증가할 것으로 예상되는 지역이었습니다.
수요가 증가할 것으로 예상되는 지역에 대해서는 새로운 쏘카존을 만들 필요가 있을 것입니다.
그리하여, 이번 프로젝트는 신규 쏘카존의 위치를 제안하는 것을 그 목표로 잡았습니다.

![]({{site.url}}\images\2023-04-14-socar_zones\Slide4.PNG){: .img-100-center}

전체적인 프로젝트의 구조입니다.
프로젝트의 전체 내용을 한마디로 요약하면 다음과 같습니다.

*경기도 지역을 6개의 군집으로 나눈 후 각 군집별로 수요를 예측하여 미래에 수요가 증가할 것으로 예상되는 지역을 선정한 뒤, 해당 지역에 대하여 신규 쏘카존의 위치를 제안한다.*
{: .text-center}

프로젝트의 전체 과정은 네 단계로 나누어보았는데, 각각 '데이터 분석', '군집화', '수요예측', '신규존 제안' 입니다.
각각의 단계에 대한 설명은 다음과 같습니다.

 - 데이터 분석 : 군집화에서 사용할 feature들을 정한다.
 - 군집화 : k-means clustering을 통해 경기도 42개 지역을 6개 군으로 나눈다.
 - 수요예측 : 각 군들에 대하여 가장 수요가 증가할 것으로 예상되는 지역을 선정한다.
 - 신규존 제안 : 선정한 지역에 대하여 신규 쏘카존의 위치를 제안한다.

## 데이터 분석

![]({{site.url}}\images\2023-04-14-socar_zones\Slide5.PNG){: .img-100-center}

저희 팀은 수많은 지역들 중 경기도를 타겟으로 삼았습니다.
그 이유는, 제공받은 `수요 데이터` 대부분(77.96%)이 경기도의 데이터였기 때문이었는데요.
`수요 데이터`는 `지역1`(대지역) 기준으로 경기도, 울산광역시, 전라북도, 세종특별자치시, 부산광역시의 다섯 곳의 지역을 포함하고 있었습니다.
그 중 가장 많은 양의 데이터가 포함되어 있기도 하고, 지리적인, 그리고 행정적인 유사성을 따져보더라도, 경기도를 주요 관심지역으로 삼는 것이 가장 타당해보였습니다.

![]({{site.url}}\images\2023-04-14-socar_zones\Slide6.PNG){: .img-100-center}

`수요 데이터` 중 경기도 지역 데이터는 `지역2`(소지역)을 기준으로 16개 소지역으로 나뉩니다.
그것들은
[시](https://ko.wikipedia.org/wiki/%EC%8B%9C_(%ED%96%89%EC%A0%95_%EA%B5%AC%EC%97%AD)),
[군](https://ko.wikipedia.org/wiki/%EB%8C%80%ED%95%9C%EB%AF%BC%EA%B5%AD%EC%9D%98_%EA%B5%B0),
[구](https://ko.wikipedia.org/wiki/%EB%8C%80%ED%95%9C%EB%AF%BC%EA%B5%AD%EC%9D%98_%EA%B5%AC)
를 의미합니다.
- 시(市) : 자치구를 따로 가지고 있지 않은 소도시 (e.g. 이천시, 포천시)
- 군(郡) : 시보다 규모가 작은 지역 (e.g. 양평군, 가평군)
- 구(區) : 자치구를 가지고 있는 대도시의 자치구(e.g. 수원시 팔달구, 수원시 만안구)

그런데 경기도의 시/군/구는 총 42개입니다.
그러니까 `수요 데이터`는 경기도의 모든 시/군/구의 데이터를 포함하고 있지 않습니다.
만약 42개 지역을 군집화하고, 16개 지역에 대한 수요들을 바탕으로 군집별 수요 증감을 예측한다면, 수요 정보가 없는 지역에 대해서도 수요의 증감을 간접적으로 예상할 수 있게 됩니다.

이것이 가능하려면 군집화가 '잘' 되어야 합니다.
카셰어링 수요를 잘 반영하는 군집화가 되어야 합니다.
다시 말해, 카셰어링 수요와 관련된 지역별 feature들을 잘 선정하고 그 feature들을 통해 군집화를 진행해야 합니다.

카셰어링 수요를 잘 반영하는 feature를 찾기 위해 먼저 논문들을 살폈습니다.
대표적으로 참고한 논문은 [서울시의 카셰어링 이용도에 대한 지역적 요인특성분석](https://www.dbpia.co.kr/journal/articleDetail?nodeId=NODE02497522)입니다.
이 논문의 결론을 읽어보면 어떤 지역이 업무중심지역이거나 역세권, 혹은 대학가이면 카셰어링 수요가 많다고 되어 있습니다.
또한 해당 지역이 주거지인지 여부 또한 카셰어링 수요에 영향을 미친다는 언급이 있습니다.
그밖에 대중교통이 용이한 지역이어도 카셰어링 수요가 많다는 것과 토지용도 또한 고려의 대상이 될 수 있다는 말들도 있습니다.

이러한 사항들을 바탕으로 하여 총 17종의 feature들을 선정하고, 경기도의 42개 지역에 대하여 해당 feature들에 대한 데이터를 모았습니다.
그리고 이 데이터를 `지역별 데이터`라고 명명했습니다.
수집한 feature들의 목록은 다음과 같습니다.
- `쏘카존 수`
- `인구`
- `2030인구`
- `아파트 수`
- `행복주택 수`
- `지하철역 수`
- `환승역 수`
- `버스정류장 수`
- `대학교 수`
- `대학생 수`
- `녹지`
- `주거`
- `공업`
- `상업`
- `위도`
- `경도`
- `면적`

위 feature들에 대한 상세한 설명은 다음과 같습니다.
- `인구`는 직접적으로 데이터를 얻을 수 있었으나, `2030인구`는 직접 데이터를 얻을 수는 없었습니다.
하지만 각 광역별(구를 가지고 있는 시별) 인구비율 데이터를 얻을 수 있었고, 이를 통해 `2030인구`를 간접적으로 구했습니다.
- feature들 중 수작업을 통해 데이터를 확보한 것은 `녹지`, `주거`, `공업`, `상업`입니다.
[지도](https://gris.gg.go.kr/)를 통해 살펴보며 해당 시/군/구의 하위행정구역(e.g. 동, 읍, 면)에 대하여 `녹지`, `주거`, `공업`, `상업` 중 하나의 토지용도를 결정했습니다.
해당 시/군/구의 `녹지` 데이터는 해당 시/군/구의 하위행정구역 중 얼마만큼의 비율의 하위행정구역이 `주거`인지를 나타냅니다.
예를 들어, 수원시 장안구의 경우 열 개의 동을 가지고 있고, 각각의 동들은

![]({{site.url}}\images\2023-04-14-socar_zones\landuse.png){: .img-50-center}

와 같은 토지용도를 가지고 있다면, 3개 동이 `녹지`이므로 수원시 장안구 지역의 `녹지`는 $\frac3{11}=0.2727$로 정합니다.
8개 동이 `주거`이므로 수원시 장안구 지역의 `주거`는 $\frac8{11}=0.7273$으로 정합니다.
그밖에 `공업`과 `상업`은 한번도 나타나지 않았으므로 각각 0입니다.
- `위도`와 `경도`, `면적`은 지리적인, 혹은 기하학적인 feature이므로 쏘카수요와 직접적으로 연관이 있다고 말할 수 없습니다.
이것들은 참고용으로, 혹은 대조군의 역할을 위해 구해놓은 것입니다.

이 17종의 feature들 중 `이용 수`(쏘카 사용량)와 상관성이 높은 열 개의 feature를 선별했습니다.
여기에서 '상관성'이라 함은 상관계수(pearson correlation coefficient)를 의미합니다.
또, `이용 수`는 지역별 쏘카 수요를 의미하는 것으로, `수요 데이터`로부터 손쉽게 얻을 수 있습니다.
17종의 feature에 대한 `이용 수`와의 상관계수는

![]({{site.url}}\images\2023-04-14-socar_zones\correlation.png){: .img-20-center}






![]({{site.url}}\images\2023-04-14-socar_zones\Slide7.PNG){: .img-100-center}

![]({{site.url}}\images\2023-04-14-socar_zones\Slide8.PNG){: .img-100-center}

![]({{site.url}}\images\2023-04-14-socar_zones\Slide9.PNG){: .img-100-center}

![]({{site.url}}\images\2023-04-14-socar_zones\Slide10.PNG){: .img-100-center}

![]({{site.url}}\images\2023-04-14-socar_zones\Slide11.PNG){: .img-100-center}

![]({{site.url}}\images\2023-04-14-socar_zones\Slide12.PNG){: .img-100-center}

![]({{site.url}}\images\2023-04-14-socar_zones\Slide13.PNG){: .img-100-center}

![]({{site.url}}\images\2023-04-14-socar_zones\Slide14.PNG){: .img-100-center}

# 주요 코드 및 상세 결과